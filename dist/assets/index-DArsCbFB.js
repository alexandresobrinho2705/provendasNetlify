import E,{useState as x,Component as j}from"react";import P from"react-dom";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function u(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=u(e);fetch(e.href,t)}})();function w(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var y={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _;function S(){if(_)return m;_=1;var r=E,o=Symbol.for("react.element"),u=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,e=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function c(l,n,f){var s,d={},p=null,R=null;f!==void 0&&(p=""+f),n.key!==void 0&&(p=""+n.key),n.ref!==void 0&&(R=n.ref);for(s in n)i.call(n,s)&&!t.hasOwnProperty(s)&&(d[s]=n[s]);if(l&&l.defaultProps)for(s in n=l.defaultProps,n)d[s]===void 0&&(d[s]=n[s]);return{$$typeof:o,type:l,key:p,ref:R,props:d,_owner:e.current}}return m.Fragment=u,m.jsx=c,m.jsxs=c,m}var g;function b(){return g||(g=1,y.exports=S()),y.exports}var a=b(),h={},v;function C(){if(v)return h;v=1;var r=P;return h.createRoot=r.createRoot,h.hydrateRoot=r.hydrateRoot,h}var q=C();const L=w(q);async function N(r){return(await fetch("/.netlify/functions/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})})).json()}function $(){const[r,o]=x(!1),[u,i]=x("");async function e(t){var c,l,n,f,s;o(!0),i("");try{const d=await N(t),p=((s=(f=(n=(l=(c=d==null?void 0:d.candidates)==null?void 0:c[0])==null?void 0:l.content)==null?void 0:n.parts)==null?void 0:f[0])==null?void 0:s.text)||"Sem resposta";i(p)}catch{i("Erro ao chamar a IA")}finally{o(!1)}}return{sendPrompt:e,response:u,loading:r}}function D(){const[r,o]=x(""),{sendPrompt:u,response:i,loading:e}=$();return a.jsxs("div",{style:{padding:20},children:[a.jsx("h2",{children:"Gemini funcionando no Netlify"}),a.jsx("textarea",{value:r,onChange:t=>o(t.target.value),rows:4,style:{width:"100%"}}),a.jsx("button",{onClick:()=>u(r),disabled:e,children:e?"Pensando...":"Enviar"}),a.jsx("pre",{children:i})]})}class I extends j{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(o,u){console.error("ErrorBoundary caught an error",o,u)}render(){return this.state.hasError?a.jsx("h2",{children:"Algo deu errado."}):this.props.children}}const O=document.getElementById("root");if(!O)throw new Error("Could not find root element to mount to");const J=L.createRoot(O);J.render(a.jsx(E.StrictMode,{children:a.jsx(I,{children:a.jsx(D,{})})}));
